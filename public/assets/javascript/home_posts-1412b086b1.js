{let t=function(){let t=$("#new-post-form");t.submit(function(s){s.preventDefault(),$.ajax({type:"post",url:"/posts/create",data:t.serialize(),success:function(t){let s=e(t.data.post);$("#post-list-container>ul").prepend(s),n($(" .delete-post-button",s)),new PostComments(t.data.post._id),new ToggleLike($(" .toggle-like-button",s)),new Noty({theme:"relax",text:"Post published!",type:"success",layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t.responseText)}})})},e=function(t){return $(`<li id="post-${t._id}">\n    <div class="post-content">\n\n      <small>\n        <a class="delete-post-button" href="/posts/destroy/${t._id}"> <i class="fa-solid fa-trash-can fa-2x"></i> </a>\n      </small>\n \n      <div class="post-img-vau"> \n      <a href="/users/profile/${t.user._id}">\n      ${t.user.avatar?`<img src="${t.user.avatar}" alt="${t.user.name}">`:` <img\n      class="rounded-circle"\n      id="user-dp"\n      src="https://images.assetsdelivery.com/compings_v2/tanyastock/tanyastock1608/tanyastock160801788.jpg"\n      alt="${t.user.name}"\n    />`}\n      </a>\n      </div>\n      <a href="/users/profile/${t.user._id}">\n           <small class="user-name">${t.user.name} </small>\n      </a>\n      <br>\n    <div class="mainPostContent"> ${t.content}  </div> \n    <br>\n \n    <div>\n    <a\n      class="toggle-like-button"\n      data-likes="${t.likes.length}"\n      href="/likes/toggle/?id=${t._id}&type=Post"\n    >\n     <i class="fa-regular white fa-heart fa-lg">  ${t.likes.length} </i>\n    </a>\n     </div>\n     \n   </div>\n    <div id="comment-list">\n        <div class="comment-form">\n        \n        <form id="post-${t._id}-comment-form" action="/comments/create" method="POST">\n            <input\n            type="text"\n            class="cmt"\n            name="content"\n            placeholder="Type here to add comment"\n            required\n            />\n            <input type="hidden" name="post" value="${t._id}" />\n            <input class="submit" type="submit" value="Add Comment" />\n        </form>\n      \n        </div>\n        <br>\n        <div id="Comms"> Comments </div>\n        <div class="post-comment-list">\n        <ul id="post-comments-${t._id}">\n\n        </ul>\n        </div>\n    </div>\n</li>`)},n=function(t){$(t).click(function(e){e.preventDefault(),$.ajax({type:"get",url:$(t).prop("href"),success:function(t){$(`#post-${t.data.post_id}`).remove(),new Noty({theme:"relax",text:"Post Deleted",type:"success",layout:"topRight",timeout:1500}).show()},error:function(t){console.log(t.responseText)}})})},s=function(){$("#post-list-container>ul>li").each(function(){let t=$(this),e=$(" .delete-post-button",t);n(e);let s=t.prop("id").split("-")[1];new PostComments(s)})};t(),s()}